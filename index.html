<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>L·ªùi Ch√∫c Gi√°ng Sinh üéÑ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Great+Vibes&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg-gradient-1: #050816;
        --bg-gradient-2: #0b1220;
        --accent-red: #ff4b6e;
        --accent-gold: #ffd56a;
        --accent-green: #4ade80;
        --card-bg: rgba(15, 23, 42, 0.92);
        --glass-border: rgba(148, 163, 184, 0.4);
        --text-main: #e5e7eb;
        --text-soft: #9ca3af;
        --snow: rgba(255, 255, 255, 0.95);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        min-height: 100vh;
        font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont,
          sans-serif;
        color: var(--text-main);
        background: radial-gradient(
          circle at top,
          #1e293b 0,
          #020617 55%,
          #000 100%
        );
        overflow-x: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 16px;
        position: relative;
      }

      /* Background gradient glow */
      .bg-glow {
        position: fixed;
        inset: 0;
        z-index: -2;
        background: radial-gradient(
            circle at 10% 20%,
            rgba(248, 113, 113, 0.35) 0,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 0%,
            rgba(96, 165, 250, 0.45) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 50% 80%,
            rgba(45, 212, 191, 0.35) 0,
            transparent 55%
          );
        filter: blur(10px);
        opacity: 0.8;
        animation: glow-move 18s ease-in-out infinite alternate;
      }

      @keyframes glow-move {
        0% {
          transform: translate3d(0, 0, 0);
        }
        50% {
          transform: translate3d(0, -10px, 0) scale(1.05);
        }
        100% {
          transform: translate3d(0, 10px, 0) scale(1.03);
        }
      }

      /* Snow */
      .snow {
        position: fixed;
        top: -10px;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 2000;
        overflow: hidden;
      }

      .snowflake {
        position: absolute;
        top: -10px;
        color: var(--snow);
        font-size: 10px;
        text-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
        animation-name: snowfall;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
      }

      @keyframes snowfall {
        0% {
          transform: translate3d(0, -20px, 0) rotate(0deg);
          opacity: 0;
        }
        15% {
          opacity: 1;
        }
        100% {
          transform: translate3d(20px, 110vh, 0) rotate(360deg);
          opacity: 0;
        }
      }

      /* Main container */
      .page {
        max-width: 460px;
        width: 100%;
      }

      .card {
        position: relative;
        background: linear-gradient(
          135deg,
          rgba(15, 23, 42, 0.94),
          rgba(15, 23, 42, 0.98)
        );
        border-radius: 28px;
        padding: 20px 18px 22px;
        border: 1px solid var(--glass-border);
        box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9),
          0 22px 40px rgba(15, 23, 42, 0.8), 0 0 60px rgba(248, 250, 252, 0.12);
        backdrop-filter: blur(18px);
        overflow: hidden;
      }

      @media (min-width: 480px) {
        .card {
          padding: 24px 24px 26px;
          border-radius: 32px;
        }
      }

      /* Decorative lights line */
      .lights {
        position: absolute;
        inset: 10px 16px auto;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        pointer-events: none;
      }

      .light-bulb {
        width: 10px;
        height: 16px;
        border-radius: 999px;
        background: var(--accent-red);
        box-shadow: 0 0 12px rgba(248, 113, 113, 0.9);
        transform-origin: top center;
        animation: swing 1.4s ease-in-out infinite alternate;
      }

      .light-bulb:nth-child(2n) {
        background: var(--accent-gold);
        box-shadow: 0 0 12px rgba(250, 204, 21, 0.95);
        animation-delay: 0.25s;
      }

      .light-bulb:nth-child(3n) {
        background: var(--accent-green);
        box-shadow: 0 0 12px rgba(74, 222, 128, 0.95);
        animation-delay: 0.45s;
      }

      @keyframes swing {
        0% {
          transform: rotate(-6deg);
        }
        100% {
          transform: rotate(6deg);
        }
      }

      /* Header */
      .header {
        padding-top: 18px;
        display: flex;
        gap: 14px;
        align-items: center;
        justify-content: space-between;
      }

      .title-block {
        flex: 1;
      }

      .subtitle {
        font-size: 0.74rem;
        text-transform: uppercase;
        letter-spacing: 0.22em;
        color: var(--accent-gold);
        font-weight: 500;
        margin-bottom: 3px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .subtitle-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--accent-gold);
        box-shadow: 0 0 10px rgba(250, 204, 21, 0.9);
      }

      .main-title {
        font-family: "Great Vibes", cursive;
        font-size: 2.1rem;
        line-height: 1.1;
        color: #fefce8;
        text-shadow: 0 0 16px rgba(250, 204, 21, 0.8),
          0 0 40px rgba(250, 250, 250, 0.6);
        margin-bottom: 4px;
      }

      .subline {
        font-size: 0.9rem;
        color: var(--text-soft);
      }

      .badge-year {
        padding: 8px 10px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        background: radial-gradient(
          circle at 0 0,
          rgba(248, 250, 252, 0.1),
          transparent 55%
        );
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 2px;
      }

      .badge-year span:first-child {
        color: var(--accent-green);
        font-weight: 600;
      }

      .badge-year span:last-child {
        color: var(--text-soft);
        font-size: 0.72rem;
      }

      /* Divider */
      .divider {
        margin: 12px 0 14px;
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(148, 163, 184, 0.5),
          rgba(148, 163, 184, 0.3),
          transparent
        );
        position: relative;
        overflow: visible;
      }

      .divider::after {
        content: "‚ú®";
        position: absolute;
        left: 50%;
        top: -14px;
        transform: translateX(-50%);
        font-size: 0.92rem;
        text-shadow: 0 0 10px rgba(248, 250, 252, 0.85);
      }

      /* Body */
      .body {
        display: grid;
        grid-template-columns: minmax(0, 1.25fr) minmax(0, 1fr);
        gap: 16px;
        align-items: center;
      }

      @media (max-width: 430px) {
        .body {
          grid-template-columns: minmax(0, 1fr);
          gap: 18px;
        }
      }

      /* Left ‚Äì text + button */
      .greeting {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .to-line {
        font-size: 0.78rem;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: var(--text-soft);
      }

      .to-name {
        font-size: 1.05rem;
        font-weight: 600;
        color: #fef9c3;
      }

      .message-preview {
        font-size: 0.9rem;
        color: var(--text-soft);
      }

      .message-preview strong {
        color: #e5e7eb;
        font-weight: 600;
      }

      .main-btn {
        margin-top: 6px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 10px 16px;
        border-radius: 999px;
        border: none;
        outline: none;
        font-size: 0.9rem;
        font-weight: 600;
        letter-spacing: 0.03em;
        text-transform: uppercase;
        cursor: pointer;
        color: #0b1120;
        background: radial-gradient(
          circle at 0 0,
          #f97316,
          #ef4444 35%,
          #ec4899 65%,
          #a855f7 100%
        );
        box-shadow: 0 10px 30px rgba(248, 113, 113, 0.6),
          0 0 18px rgba(251, 113, 133, 0.6);
        position: relative;
        overflow: hidden;
        transform: translateY(0);
        transition: transform 0.15s ease, box-shadow 0.15s ease,
          filter 0.15s ease;
      }

      .main-btn span.icon {
        font-size: 1.05rem;
        filter: drop-shadow(0 0 6px rgba(254, 249, 195, 0.7));
      }

      .main-btn::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          rgba(255, 255, 255, 0.45),
          transparent 60%
        );
        opacity: 0;
        transform: translateX(-40%);
        transition: opacity 0.2s ease, transform 0.2s ease;
      }

      .main-btn:active {
        transform: translateY(2px) scale(0.99);
        box-shadow: 0 6px 16px rgba(248, 113, 113, 0.55),
          0 0 10px rgba(251, 113, 133, 0.5);
        filter: brightness(0.96);
      }

      .main-btn:hover::before {
        opacity: 1;
        transform: translateX(15%);
      }

      /* Right ‚Äì tree card */
      .tree-card {
        position: relative;
        border-radius: 20px;
        margin-top: 15px;
        padding: 14px;
        background: radial-gradient(
            circle at 10% 0,
            rgba(248, 250, 252, 0.12),
            transparent 60%
          ),
          radial-gradient(
            circle at 100% 100%,
            rgba(74, 222, 128, 0.2),
            rgba(15, 23, 42, 0.95)
          );
        border: 1px solid rgba(148, 163, 184, 0.4);
        box-shadow: 0 12px 25px rgba(15, 23, 42, 0.9),
          0 0 25px rgba(96, 165, 250, 0.35);
        overflow: hidden;
      }

      .tree {
        position: relative;
        width: 100%;
        aspect-ratio: 4 / 5;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .tree-layer {
        position: absolute;
        left: 50%;
        border-left: solid transparent;
        border-right: solid transparent;
        border-bottom-style: solid;
        border-bottom-color: rgba(74, 222, 128, 0.96);
        filter: drop-shadow(0 0 14px rgba(74, 222, 128, 0.9));
        transform: translateX(-50%);
        border-radius: 8px;
      }

      .tree-layer:nth-child(1) {
        bottom: 22%;
        border-bottom-width: 72px;
        border-left-width: 26px;
        border-right-width: 26px;
      }

      .tree-layer:nth-child(2) {
        bottom: 36%;
        border-bottom-width: 54px;
        border-left-width: 22px;
        border-right-width: 22px;
      }

      .tree-layer:nth-child(3) {
        bottom: 49%;
        border-bottom-width: 40px;
        border-left-width: 18px;
        border-right-width: 18px;
      }

      .tree-star {
        position: absolute;
        bottom: 60%;
        left: 50%;
        transform: translate(-50%, -12%);
        font-size: 1.4rem;
        text-shadow: 0 0 10px rgba(250, 250, 150, 1),
          0 0 24px rgba(254, 240, 138, 0.9);
        animation: star-pulse 2.1s ease-in-out infinite;
      }

      @keyframes star-pulse {
        0% {
          transform: translate(-50%, -12%) scale(1);
          opacity: 0.85;
        }
        50% {
          transform: translate(-50%, -12%) scale(1.08);
          opacity: 1;
        }
        100% {
          transform: translate(-50%, -12%) scale(1);
          opacity: 0.85;
        }
      }

      .tree-trunk {
        position: absolute;
        bottom: 16%;
        left: 50%;
        transform: translateX(-50%);
        width: 20px;
        height: 28px;
        border-radius: 6px;
        background: linear-gradient(to bottom, #4b5563, #111827);
        box-shadow: 0 0 10px rgba(15, 23, 42, 0.9);
      }

      .tree-ornament {
        position: absolute;
        width: 9px;
        height: 9px;
        border-radius: 999px;
        background: #f97316;
        box-shadow: 0 0 10px rgba(249, 115, 22, 0.8);
        animation: ornament-blink 2.8s ease-in-out infinite;
      }

      .tree-ornament:nth-child(1) {
        top: 56%;
        left: 54%;
        animation-delay: 0.3s;
      }

      .tree-ornament:nth-child(2) {
        top: 60%;
        left: 42%;
        background: #facc15;
        box-shadow: 0 0 10px rgba(250, 204, 21, 0.85);
        animation-delay: 1s;
      }

      .tree-ornament:nth-child(3) {
        top: 67%;
        left: 60%;
        background: #fb7185;
        box-shadow: 0 0 10px rgba(251, 113, 133, 0.9);
        animation-delay: 1.8s;
      }

      .tree-ornament:nth-child(4) {
        top: 72%;
        left: 40%;
        background: #38bdf8;
        box-shadow: 0 0 10px rgba(56, 189, 248, 0.9);
        animation-delay: 2.3s;
      }

      @keyframes ornament-blink {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.85;
        }
        50% {
          transform: scale(1.2);
          opacity: 1;
        }
      }

      .tree-label {
        margin-top: 6px;
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        text-align: center;
        color: var(--text-soft);
      }

      /* Message modal */
      .message-modal-backdrop {
        position: fixed;
        inset: 0;
        background: radial-gradient(
          circle at top,
          rgba(15, 23, 42, 0.5),
          rgba(15, 23, 42, 0.96)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 18px;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.24s ease;
        z-index: 20;
      }

      .message-modal-backdrop.active {
        opacity: 1;
        pointer-events: auto;
      }

      .message-modal {
        max-width: 440px;
        width: 100%;
        background: radial-gradient(
          circle at top,
          rgba(15, 23, 42, 0.98),
          rgba(15, 23, 42, 0.99)
        );
        border-radius: 24px;
        padding: 20px 18px 18px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9),
          0 0 40px rgba(251, 191, 36, 0.2);
        transform: translateY(18px) scale(0.96);
        opacity: 0;
        transition: transform 0.26s cubic-bezier(0.16, 0.77, 0.35, 1.1),
          opacity 0.26s ease;
        position: relative;
        overflow: hidden;
      }

      .message-modal-backdrop.active .message-modal {
        transform: translateY(0) scale(1);
        opacity: 1;
      }

      .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 6px;
      }

      .modal-title {
        position: relative;
        font-weight: 700;
        text-align: center;
        font-size: 1.25rem;
        background: linear-gradient(90deg, #ffe08a, #ff7eb3, #a78bfa);
        -webkit-background-clip: text;
        color: transparent;
        text-shadow: 0 0 14px rgba(255, 200, 255, 0.45);
        animation: title-glow 3s ease-in-out infinite;
      }

      @keyframes title-glow {
        0% {
          text-shadow: 0 0 6px rgba(255, 200, 255, 0.35),
            0 0 12px rgba(255, 150, 200, 0.25);
        }
        50% {
          text-shadow: 0 0 12px rgba(255, 200, 255, 0.55),
            0 0 20px rgba(255, 150, 220, 0.45);
        }
        100% {
          text-shadow: 0 0 6px rgba(255, 200, 255, 0.35),
            0 0 12px rgba(255, 150, 200, 0.25);
        }
      }

      .close-btn {
        border: none;
        outline: none;
        width: 32px;
        height: 32px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.8);
        color: var(--text-soft);
        font-size: 1.05rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.18s ease, color 0.18s ease, transform 0.1s ease;
      }

      .close-btn:active {
        transform: scale(0.96);
      }

      .close-btn:hover {
        background: rgba(30, 64, 175, 0.7);
        color: #e5e7eb;
      }

      .modal-to {
        font-size: 0.82rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: var(--text-soft);
        margin-top: 4px;
        margin-bottom: 6px;
      }

      .modal-to span {
        color: #fef9c3;
        font-weight: 600;
      }

      .message-content {
        margin-top: 6px;
        font-size: 0.94rem;
        line-height: 1.65;
        color: var(--text-main);
      }

      .message-content p + p {
        margin-top: 8px;
      }

      .message-content .highlight {
        color: var(--accent-gold);
        font-weight: 600;
      }

      .signature {
        margin-top: 14px;
        font-size: 0.88rem;
        display: flex;
        flex-direction: column;
        gap: 2px;
        color: var(--text-soft);
      }

      .signature-name {
        font-family: "Great Vibes", cursive;
        font-size: 1.5rem;
        color: #fef3c7;
        text-shadow: 0 0 12px rgba(250, 250, 200, 0.9);
      }

      /* Small bottom note */
      .footer-note {
        margin-top: 10px;
        font-size: 0.72rem;
        color: var(--text-soft);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        opacity: 0.7;
      }

      .footer-note span {
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .pulse-dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: var(--accent-red);
        box-shadow: 0 0 10px rgba(248, 113, 113, 1);
        animation: pulse 1.7s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.3);
          opacity: 0.6;
        }
      }

      /* Tiny sparkle overlay in modal */
      .sparkle {
        position: absolute;
        pointer-events: none;
        font-size: 0.85rem;
        opacity: 0;
        animation: sparkle 2.6s ease-in-out infinite;
      }

      .sparkle:nth-child(1) {
        top: 20%;
        right: 16%;
        animation-delay: 0.3s;
      }

      .sparkle:nth-child(2) {
        top: 60%;
        left: 12%;
        animation-delay: 1.1s;
      }

      .sparkle:nth-child(3) {
        bottom: 18%;
        right: 24%;
        animation-delay: 2s;
      }

      @keyframes sparkle {
        0%,
        100% {
          opacity: 0;
          transform: scale(0.6) translateY(0);
        }
        40% {
          opacity: 1;
          transform: scale(1) translateY(-4px);
        }
        60% {
          opacity: 0.6;
          transform: scale(0.9) translateY(1px);
        }
      }

      /* Avatar frame */
      .avatar-box {
        width: 105px;
        height: 105px;
        margin: 0 auto 14px auto;
        border-radius: 50%;
        border: 3px solid var(--accent-gold);
        box-shadow: 0 0 18px rgba(255, 224, 138, 0.7);
        overflow: hidden;
      }
      .avatar-box img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* Countdown */
      .countdown-wrap {
        text-align: center;
        margin-top: 10px;
      }
      .countdown-title {
        font-size: 0.8rem;
        letter-spacing: 0.1em;
        opacity: 0.7;
      }
      .countdown {
        display: flex;
        justify-content: center;
        gap: 14px;
        margin-top: 6px;
      }
      .cd-item {
        background: rgba(255, 255, 255, 0.06);
        padding: 8px 10px;
        border-radius: 12px;
        box-shadow: 0 0 12px rgba(255, 224, 138, 0.2);
        text-align: center;
        min-width: 56px;
      }
      .cd-number {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--accent-gold);
        text-shadow: 0 0 10px rgba(255, 224, 138, 0.9);
      }
      .cd-label {
        font-size: 0.65rem;
        opacity: 0.7;
      }
    </style>
  </head>
  <body>
    <div
      id="musicToggle"
      style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(8px);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        color: #fff;
        cursor: pointer;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
        z-index: 9999;
      "
    >
      üîá
    </div>

    <div class="bg-glow"></div>

    <!-- Snow layer -->
    <div class="snow" id="snow"></div>

    <main class="page">
      <section class="card">
        <div class="lights">
          <div class="light-bulb"></div>
          <div class="light-bulb"></div>
          <div class="light-bulb"></div>
          <div class="light-bulb"></div>
          <div class="light-bulb"></div>
          <div class="light-bulb"></div>
          <div class="light-bulb"></div>
        </div>
        <div class="avatar-box">
          <img id="avatarIMG" src="" />
        </div>

        <header class="header">
          <div class="title-block">
            <div class="subtitle">
              <span class="subtitle-dot"></span>
              <span>Special Christmas Message</span>
            </div>
            <h1 class="main-title">Merry Christmas</h1>
            <p class="subline">
              M·ªôt l·ªùi ch√∫c nh·ªè, g·ª≠i tr·ªçn y√™u th∆∞∆°ng m√πa Gi√°ng Sinh üéÑ
            </p>
          </div>

          <div class="badge-year">
            <span>Noel 2025</span>
            <span>Tap to open</span>
          </div>
        </header>

        <div class="divider"></div>
        <div class="countdown-wrap">
          <div class="countdown-title">ƒê·∫øm ng∆∞·ª£c ƒë·∫øn Gi√°ng Sinh üéÑ</div>
          <div class="countdown" id="countdown">
            <div class="cd-item">
              <div class="cd-number" id="cd-days">0</div>
              <div class="cd-label">Ng√†y</div>
            </div>
            <div class="cd-item">
              <div class="cd-number" id="cd-hours">0</div>
              <div class="cd-label">Gi·ªù</div>
            </div>
            <div class="cd-item">
              <div class="cd-number" id="cd-mins">0</div>
              <div class="cd-label">Ph√∫t</div>
            </div>
            <div class="cd-item">
              <div class="cd-number" id="cd-secs">0</div>
              <div class="cd-label">Gi√¢y</div>
            </div>
          </div>
        </div>

        <div class="body">
          <!-- Left side -->
          <div class="greeting">
            <div>
              <p class="to-line">G·ª≠i ƒë·∫øn</p>
              <p class="to-name" id="receiverInline">B·∫°n c√πng Chi b·ªô</p>
            </div>
            <p class="message-preview">
              <strong>Click ƒë·ªÉ xem l·ªùi ch√∫c ri√™ng d√†nh ri√™ng cho c·∫≠u</strong> ‚Äì
              k√®m ch√∫t ph√©p m√†u nh·ªè cho m√πa l·ªÖ h·ªôi n√†y ‚ú®
            </p>

            <button class="main-btn" id="openMessageBtn">
              <span class="icon">üéÅ</span>
              <span>Ch·ªó n√†y n√® ><</span>
            </button>
          </div>

          <!-- Right side ‚Äì tree -->
          <div class="tree-card">
            <div class="tree">
              <div class="tree-layer"></div>
              <div class="tree-layer"></div>
              <div class="tree-layer"></div>
              <div class="tree-star">‚≠ê</div>
              <div class="tree-trunk"></div>
              <div class="tree-ornament"></div>
              <div class="tree-ornament"></div>
              <div class="tree-ornament"></div>
              <div class="tree-ornament"></div>
            </div>
            <p class="tree-label">Gi√°ng Sinh ·∫•m √°p, b√¨nh an & h·∫°nh ph√∫c</p>
          </div>
        </div>

        <div class="footer-note">
          <span>
            <span class="pulse-dot"></span>
            M·ªü b·∫±ng ƒëi·ªán tho·∫°i ƒë·ªÉ xem ƒë·∫πp nh·∫•t
          </span>
          <span>Designed with ‚ù§Ô∏è just for you</span>
        </div>
      </section>
    </main>

    <!-- Message Modal -->
    <div class="message-modal-backdrop" id="modal">
      <div class="message-modal">
        <div class="sparkle">‚ú®</div>
        <div class="sparkle">‚ùÑÔ∏è</div>
        <div class="sparkle">‚≠ê</div>

        <header class="modal-header">
          <h2 class="modal-title">
            <span class="icon">üéÑ</span>
            L·ªùi ch√∫c Gi√°ng Sinh d√†nh ri√™ng cho b·∫°n
          </h2>
          <button class="close-btn" id="closeModalBtn">&times;</button>
        </header>

        <p class="modal-to">
          G·ª≠i ƒë·∫øn: <span id="receiverName">B·∫°n c√πng Chi B·ªô</span>
        </p>

        <div class="message-content">
          <p>
            Ch√∫c b·∫°n m·ªôt m√πa <span class="highlight">Gi√°ng Sinh ·∫•m √°p</span>,
            ƒë·∫ßy ·∫Øp ti·∫øng c∆∞·ªùi, nh·ªØng cu·ªôc tr√≤ chuy·ªán d·ªÖ th∆∞∆°ng v√† nh·ªØng kho·∫£nh
            kh·∫Øc b√¨nh y√™n hi·∫øm hoi gi·ªØa b·ªôn b·ªÅ cu·ªôc s·ªëng.
          </p>
          <p>
            Mong r·∫±ng m·ªçi ƒëi·ªÅu b·∫°n ∆∞·ªõc ƒë·ªÅu s·ªõm th√†nh hi·ªán th·ª±c: nh·ªØng d·ª± ƒë·ªãnh
            c√≤n dang d·ªü s·∫Ω ƒë∆∞·ª£c ho√†n th√†nh, nh·ªØng n·ªói bu·ªìn c≈© s·∫Ω ƒë∆∞·ª£c g√≥i l·∫°i,
            nh∆∞·ªùng ch·ªó cho
            <span class="highlight">ni·ªÅm vui m·ªõi, c∆° h·ªôi m·ªõi</span> trong nƒÉm
            s·∫Øp ƒë·∫øn.
          </p>
          <p>
            D√π h√¥m nay b·∫°n ·ªü ƒë√¢u, l√†m g√¨, h√£y nh·ªõ r·∫±ng lu√¥n c√≥ m·ªôt ng∆∞·ªùi √¢m th·∫ßm
            ch√∫c b·∫°n
            <span class="highlight"
              >b√¨nh an, kh·ªèe m·∫°nh v√† h·∫°nh ph√∫c th·∫≠t l√¢u</span
            >. C·∫£m ∆°n v√¨ b·∫°n ƒë√£ xu·∫•t hi·ªán trong h√†nh tr√¨nh n√†y üéÅ
          </p>
        </div>

        <div class="signature">
          <span>Th√¢n g·ª≠i t·ª´</span>
          <span class="signature-name">Ng∆∞·ªùi g·ª≠i b√≠ m·∫≠t üíå</span>
        </div>
      </div>
    </div>

    <audio id="bgMusic" src="christmas.mp3" loop></audio>

    <script>
      // Get elements
      const modalBackdrop = document.getElementById("modal");
      const openMessageBtn = document.getElementById("openMessageBtn");
      const closeModalBtn = document.getElementById("closeModalBtn");
      const receiverInline = document.getElementById("receiverInline");
      const receiverName = document.getElementById("receiverName");
      const snowContainer = document.getElementById("snow");
      const bgMusic = document.getElementById("bgMusic");

      // Read "to" parameter from URL to customize name: ?to=Lan, ?to=Nguyen%20A,...
      (function setReceiverNameFromURL() {
        const params = new URLSearchParams(window.location.search);
        const paramName = params.get("to");
        let name = paramName ? paramName.trim() : "";

        if (name.length === 0) {
          name = "B·∫°n c√πng Chi b·ªô";
        }

        receiverInline.textContent = name;
        receiverName.textContent = name;
      })();

      // Open / close modal (NH·∫†C KH√îNG B·ªä ·∫¢NH H∆Ø·ªûNG)
      openMessageBtn.addEventListener("click", () => {
        modalBackdrop.classList.add("active");
      });

      closeModalBtn.addEventListener("click", () => {
        modalBackdrop.classList.remove("active");
      });

      modalBackdrop.addEventListener("click", (e) => {
        if (e.target === modalBackdrop) {
          modalBackdrop.classList.remove("active");
        }
      });

      // Create snowflakes
      function createSnowflakes() {
        const flakesCount = 80; // s·ªë l∆∞·ª£ng b√¥ng tuy·∫øt
        const emojis = ["‚ùÑ", "‚úª", "‚úº", "‚ú¶"];

        for (let i = 0; i < flakesCount; i++) {
          const snowflake = document.createElement("div");
          snowflake.className = "snowflake";
          snowflake.textContent =
            emojis[Math.floor(Math.random() * emojis.length)];

          const startLeft = Math.random() * 100; // %
          const duration = 10 + Math.random() * 10; // 10‚Äì20s
          const delay = Math.random() * 10; // 0‚Äì10s
          const size = 10 + Math.random() * 10; // 10‚Äì20px

          snowflake.style.left = startLeft + "vw";
          snowflake.style.fontSize = size + "px";
          snowflake.style.animationDuration = duration + "s";
          snowflake.style.animationDelay = delay + "s";

          snowContainer.appendChild(snowflake);
        }
      }

      createSnowflakes();
      /* ==== AVATAR FROM URL ==== */
      (function loadAvatar() {
        const params = new URLSearchParams(window.location.search);
        const urlAvatar = params.get("avatar");
        const defaultAvatar = "./avt.png";

        document.getElementById("avatarIMG").src = urlAvatar
          ? urlAvatar
          : defaultAvatar;
      })();

      /* ==== CHRISTMAS COUNTDOWN ==== */
      function updateCountdown() {
        const christmas = new Date(2025, 11, 25).getTime(); // th√°ng b·∫Øt ƒë·∫ßu t·ª´ 0
        const now = Date.now();
        let t = christmas - now;

        if (t < 0) t = 0;

        const d = Math.floor(t / (1000 * 60 * 60 * 24));
        const h = Math.floor((t % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const m = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((t % (1000 * 60)) / 1000);

        document.getElementById("cd-days").textContent = d;
        document.getElementById("cd-hours").textContent = h;
        document.getElementById("cd-mins").textContent = m;
        document.getElementById("cd-secs").textContent = s;
      }

      setInterval(updateCountdown, 1000);
      updateCountdown();
      /* ===== MUSIC CONTROL ===== */

      const musicBtn = document.getElementById("musicToggle");
      let isPlaying = false;

      function fadeInMusic() {
        bgMusic.volume = 0;
        let v = 0;
        const fade = setInterval(() => {
          if (v < 1) {
            v += 0.05;
            bgMusic.volume = v;
          } else clearInterval(fade);
        }, 150);
      }

      function playMusic() {
        bgMusic
          .play()
          .then(() => {
            fadeInMusic();
            isPlaying = true;
            musicBtn.textContent = "üîä";
          })
          .catch(() => {});
      }

      function stopMusic() {
        bgMusic.pause();
        isPlaying = false;
        musicBtn.textContent = "üîá";
      }

      // Auto-play on load (n·∫øu kh√¥ng b·ªã ch·∫∑n)
      function autoStartMusic() {
        playMusic();

        // fallback khi b·ªã block autoplay
        const unlock = () => {
          playMusic();
          document.body.removeEventListener("touchstart", unlock);
          document.body.removeEventListener("click", unlock);
        };

        document.body.addEventListener("touchstart", unlock, { once: true });
        document.body.addEventListener("click", unlock, { once: true });
      }

      window.addEventListener("DOMContentLoaded", autoStartMusic);

      // B·∫•m n√∫t loa
      musicBtn.addEventListener("click", () => {
        if (isPlaying) stopMusic();
        else playMusic();
      });

      // B·∫•m n√∫t m·ªü l·ªùi ch√∫c ‚Üí c≈©ng b·∫≠t nh·∫°c
      openMessageBtn.addEventListener("click", () => {
        if (!isPlaying) playMusic();
      });
    </script>
  </body>
</html>
